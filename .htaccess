# Enable rewrite engine
RewriteEngine On

# Redirect specific old URL to new URL
Redirect 301 /creations/diy/diy-ambilight-with-ws2812b-esp32-and-hyperion/ https://devblog.jasonbrain.com/2024/12/hyperion-diy-ambilight-with-ws2812b.html
Redirect 301 /creations/diy/webdev/astra-hook-social-media-sharing-buttons/ https://devblog.jasonbrain.com/2025/02/how-to-add-social-media-sharing-buttons.html
Redirect 301 /creations/diy/wled/adding-alexa-voice-control-to-wled/ https://devblog.jasonbrain.com/2025/01/adding-alexa-voice-control-to-wled.html
Redirect 301 /creations/diy/webdev/year-progress-calculator/ https://devblog.jasonbrain.com/2025/03/year-progress-calculator-now-open.html
Redirect 301 /creations/diy/workshop-smart-lighting-esp32-12v-led-strips-and-wled/ https://devblog.jasonbrain.com/2024/12/wled-diy-shop-smart-lighting-with-esp32.html

# Custom 404 error page
ErrorDocument 404 /404.html

# Force HTTPS
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [R=301,L]

# Remove www
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^(.*)$ https://%1/$1 [R=301,L]

# Prevent directory listing
Options -Indexes

# Cache static assets
<FilesMatch "\.(ico|jpg|jpeg|png|gif|js|css|woff|woff2|ttf|svg|eot)$">
    Header set Cache-Control "max-age=31536000, public"
</FilesMatch>

# Security headers
Header set X-Content-Type-Options "nosniff"
Header set X-Frame-Options "DENY"
Header set X-XSS-Protection "1; mode=block"
